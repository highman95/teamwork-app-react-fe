(this["webpackJsonpteamwork-app-react-fe"]=this["webpackJsonpteamwork-app-react-fe"]||[]).push([[0],{27:function(e,t,a){e.exports=a(43)},32:function(e,t,a){},38:function(e,t,a){},39:function(e,t,a){},41:function(e,t,a){},42:function(e,t,a){},43:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(22),s=a.n(o),c=a(12),i=(a(32),a(2)),l=a(3),m=a(5),u=a(4),p=a(6),h=a(11),d=a(23),f=null!==localStorage.getItem("qoqxTMwk"),g=function(){return f?JSON.parse(localStorage.getItem("qoqxTMwk")).token:null},v=function(e){var t=e.component,a=Object(d.a)(e,["component"]);return r.a.createElement(h.b,Object.assign({},a,{render:function(e){return f?r.a.createElement(t,e):r.a.createElement(h.a,{to:{pathname:"/",state:{from:e.location}}})}}))},b=(a(38),a(26)),E=a(15),j="https://teamwork-app-api-stage.herokuapp.com/api/v1",O={signIn:"".concat(j,"/auth/signin"),signUp:"".concat(j,"/auth/create-user"),feeds:"".concat(j,"/feed"),articles:"".concat(j,"/articles"),gifs:"".concat(j,"/gifs")},w=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).state={isSigningIn:!1,email:"",password:"",error:null},a.handleChange=a.handleChange.bind(Object(E.a)(a)),a.handleSignIn=a.handleSignIn.bind(Object(E.a)(a)),a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"handleChange",value:function(e){var t=e.target,a=t.name,n=t.value;this.setState(Object(b.a)({},a,n))}},{key:"handleSignIn",value:function(e){var t=this;e.preventDefault(),this.setState({error:null,isSigningIn:!0});var a=this.props.history,n=this.state,r=n.email,o=n.password,s={method:"POST",mode:"cors",body:JSON.stringify({email:r,password:o}),headers:{"Content-Type":"application/json"}};fetch(O.signIn,s).then((function(e){return e.json()})).then((function(e){if("error"===e.status)throw new Error(e.error);var n=e.data,r=n.token,o=n.firstName;localStorage.setItem("qoqxTMwk",JSON.stringify({token:r,firstName:o})),t.setState({error:null,isSigningIn:!1,password:""}),a.push("/feed")})).catch((function(e){return t.setState({error:e.message||e.error.message,isSigningIn:!1,password:""})}))}},{key:"render",value:function(){var e=this.state,t=e.email,a=e.password,n=e.isSigningIn,o=e.error;return r.a.createElement(r.a.Fragment,null,o&&r.a.createElement("span",{className:"message error"},o),r.a.createElement("form",null,r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"E-mail Address:",r.a.createElement("input",{type:"email",name:"email",value:t,onChange:this.handleChange,required:!0}))),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Password:",r.a.createElement("input",{type:"password",name:"password",value:a,onChange:this.handleChange,required:!0}))),r.a.createElement("div",{className:"form-group"},r.a.createElement("button",{type:"submit",onClick:this.handleSignIn,disabled:n},n?"Signing in...":"Sign in"))))}}]),t}(r.a.Component),k=(a(39),function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).state={},a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"home-intro"},"Welcome to the"," ",r.a.createElement("strong",null,"TeamWork")," ","app"),r.a.createElement("div",{className:"home-sign-in"},r.a.createElement(w,this.props)))}}]),t}(r.a.Component)),y=a(13),S=a.n(y),N=a(16),x=(a(41),function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).state={isLoading:!1,comments:[]},a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.comments;this.setState({comments:e})}},{key:"render",value:function(){var e=this.state.isLoading,t=this.props.comments,a=t&&t.map((function(e){return r.a.createElement(C,{key:e.commentId,comment:e})}));return r.a.createElement(r.a.Fragment,null,e&&r.a.createElement("div",{className:"loading-box"},"Loading Comments..."),r.a.createElement("div",{className:"post-comments-box"},a))}}]),t}(r.a.Component)),C=function(e){var t=e.comment;return r.a.createElement("div",{className:"comment-wrapper"},r.a.createElement("div",{className:"author-box"},"User \u2014",t.authorId),r.a.createElement("div",{className:"comment-box"},t.comment))},I=x,L=(a(42),function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).state={isLoading:!1,error:null,post:{comments:[]}},a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.post;if(void 0!==e.id)this.setState({post:e});else{var t=this.props.match.params,a=t.postType,n=t.postId;if(void 0!==n){var r="gif"===a;this.fetchPost(n,r)}}}},{key:"fetchPost",value:function(){var e=Object(N.a)(S.a.mark((function e(t,a){var n,r,o=this;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({error:null,isLoading:!0}),n=a?O.gifs:O.articles,r={headers:{"Content-Type":"application/json",token:g()}},e.next=5,fetch("".concat(n,"/").concat(t),r).then((function(e){return e.json()})).then((function(e){if("error"===e.status)throw new Error(e.error);o.setState({isLoading:!1,error:null,post:e.data})})).catch((function(e){return o.setState({isLoading:!1,error:e.message||e.error.message})}));case 5:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,t=e.isLoading,a=e.error,n=e.post,o=n.comments;return r.a.createElement(r.a.Fragment,null,t&&r.a.createElement("div",{className:"loading-box"},"Loading Post..."),a&&r.a.createElement("span",{className:"message error"},a),n?r.a.createElement("div",{className:""},r.a.createElement("div",{className:"post-title"},r.a.createElement(c.b,{to:"/post/".concat(n.type,"/").concat(n.id)},n.title)),r.a.createElement("div",{className:"post-content"},void 0!==n.article?r.a.createElement("div",{className:"post-content-text"},n.article):r.a.createElement("img",{src:n.url,alt:"".concat(n.title,"-").concat(Date.now()),className:"post-content-image"})),r.a.createElement(I,{comments:o})):r.a.createElement("h4",null,"Post does not exist..."))}}]),t}(r.a.Component));L.defaultProps={showTrimmed:!1,post:{}};var T=L,q=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).state={isLoading:!1,error:null,feeds:[]},a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.fetchFeeds()}},{key:"fetchFeeds",value:function(){var e=Object(N.a)(S.a.mark((function e(){var t,a=this;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({error:null,isLoading:!0}),t={mode:"cors",headers:{"Content-Type":"application/json",token:g()}},e.next=4,fetch(O.feeds,t).then((function(e){return e.json()})).then((function(e){if("error"===e.status)throw new Error(e.error);a.setState({isLoading:!1,error:null,feeds:e.data})})).catch((function(e){return a.setState({isLoading:!1,error:e.message||e.error.message})}));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,t=e.isLoading,a=e.feeds.map((function(e,t){return r.a.createElement(T,{key:t,showTrimmed:!0,post:e})}));return r.a.createElement(r.a.Fragment,null,t&&r.a.createElement("div",{className:"loading-box"},"Loading..."),a)}}]),t}(r.a.Component),F=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).state={},a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("h3",null,"Oops!!!"),r.a.createElement("div",null,"This page no longer exists..."))}}]),t}(r.a.Component),P=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).state={},a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"App"},r.a.createElement("header",{className:"app-header"},r.a.createElement(c.b,{to:"/"},r.a.createElement("span",{id:"app-logo"},"TeamWork"))),r.a.createElement("div",{className:"app-content-wrapper"},r.a.createElement(h.d,null,r.a.createElement(h.b,{path:"/",component:k,exact:!0}),r.a.createElement(v,{path:"/feed",component:q,exact:!0}),r.a.createElement(v,{path:"/post/:postType/:postId",component:T,exact:!0}),r.a.createElement(h.b,{path:"*",component:F}))))}}]),t}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(c.a,null,r.a.createElement(P,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[27,1,2]]]);
//# sourceMappingURL=main.87671b34.chunk.js.map